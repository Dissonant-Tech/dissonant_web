<!DOCTYPE html>
<html>
  <head>
    <!--  Load platform.js for polyfill support. -->
    <script src="/bower_components/platform/platform.js"></script>

    <!--  Use an HTML Import to bring in the element. -->
    <link rel="import" href="/bower_components/core-menu/core-menu.html">
    <link rel="import" href="/bower_components/core-ajax/core-ajax.html">
    <link rel="import" href="/bower_components/core-item/core-item.html">
    <link rel="import" href="/bower_components/core-icons/core-icons.html">
    <link rel="import" href="/bower_components/core-pages/core-pages.html">
    <link rel="import" href="/bower_components/core-toolbar/core-toolbar.html">
    <link rel="import" href="/bower_components/core-tooltip/core-tooltip.html">
    <link rel="import" href="/bower_components/core-header-panel/core-header-panel.html">
    <link rel="import" href="/bower_components/core-drawer-panel/core-drawer-panel.html">
    <link rel="import" href="/bower_components/core-animated-pages/core-animated-pages.html">
    <link rel="import" href="/bower_components/core-collapse/core-collapse.html">

    <!--  Import Material design elements. -->
    <link rel="import" href="/bower_components/paper-item/paper-item.html">
    <link rel="import" href="/bower_components/paper-toast/paper-toast.html">
    <link rel="import" href="/bower_components/paper-ripple/paper-ripple.html">
    <link rel="import" href="/bower_components/paper-button/paper-button.html">
    <link rel="import" href="/bower_components/paper-elements/paper-elements.html">
    <link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">

    <!--  Import custom elements. -->
    <link rel="import" href="/bower_components/elements/my-post/my-post.html">
    <link rel="import" href="/bower_components/elements/dissonant-post/dissonant-post.html">
    <link rel="import" href="/bower_components/elements/about-page/about-page.html">
    <link rel="import" href="/bower_components/elements/project-page/project-page.html">
    <link rel="import" href="/bower_components/elements/contact-page/contact-page.html">

    <!-- Custom css -->
    <link href="static/css/main.css" rel="stylesheet"/>

    <style type="text/css" media="screen">
      .blue {
        height: 350px;
        background: #03A9F4;
      }
      .active-page {
        color: black;
      }
      paper-item {
        text-align: center;
        padding: 30px;
        padding-top: 20px;
        padding-bottom: 20px;
        letter-spacing: .14em;
        color: black;
      }
      .blog-container {
      }
      .blog-header {

      }
      .blog-header h1 {
        font-size: 2.8rem;
        margin-left: 2.8rem;
        padding-bottom: 0;
        margin-bottom: 0;
        color: grey;
      }
      .blog-header hr {
        padding-top: 0;
        margin-top: 0;
      }
    </style>

  </head>

  <body fullbleed unresolved>
    <core-drawer-panel responsiveWidth="1280px" id="drawerPanel">

    <core-header-panel drawer mode="seamed" class="cs-inset-box-shadow">
    <core-toolbar id="drawer-toolbar" class="cs-inset-box-shadow" style="background: #f8f8f8;">
    <core-icon src="static/images/logo.png" size="48"></core-icon>
    <span style="color: grey;">Dissonant</span>
    </core-toolbar>
    <core-menu selected="0" id="core-pages-switcher" style="margin: 0; text-align: center;"flex vertical layout>
      <paper-item label="Home"></paper-item>
      <paper-item label="Projects"></paper-item>
      <paper-item label="About"></paper-item>
      <paper-item label="Contact"></paper-item>
    </core-menu>
    </core-header-panel>

    <core-header-panel main mode="cover">
    <core-toolbar id="mainheader" class="blue">
    <paper-icon-button id="navicon" icon="menu"></paper-icon-button>
    <span id="title" flex> Home </span>
    </core-toolbar>

    <div id="page-content" vertical layout>
      <core-animated-pages id="core-pages" selected="0" transitions="cross-fade-all">

      <div id="Home" class="page" cross-fade>
        <div id="banner-container" style="position: absolute; padding-top: 0; padding-bottom: 0;" flex>
          <div id="banner" horizontal center-justified layout>
            <img src="static/images/main_header.png" style="z-index: 1001;"flex cross-fade>
          </div>
        </div>

        <div class="blog-container" flex vertical center center-justified layout>
          <div class="blog-header"  style="width: 80%" flex>
            <h1>Blog Posts</h1>
            <hr style="color: grey;" flex>
          </div>
          <div class="blog-list">
            <core-ajax id="blog-ajax"></core-ajax>
          </div>
        </div>
      </div>

      <div id="Projects" class="page">
        <project-page>
        </project-page>
      </div>

      <div id="About" class="page">
        <about-page>
        </about-page>
      </div>

      <div id="Contact" class="page">
        <contact-page>
        </contact-page>
      </div>

      </core-animated-pages>
    </div>

    </core-header-panel>
    </core-drawer-panel>

  </body>

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="static/js/jquery-2.1.1.min.js"></script>

  <script type="text/javascript">
document.addEventListener('polymer-ready', function() {
  var navicon = document.getElementById('navicon');
  var drawerPanel = document.getElementById('drawerPanel');
  navicon.addEventListener('click', function() {
    drawerPanel.togglePanel();
  });
  loadBlogs();
});

// core-pages-switcher, uses nav menu to switch through different pages
var pages = document.querySelector('#core-pages');
var page_switcher = document.querySelector('#core-pages-switcher');
var pageList = page_switcher.children;

page_switcher.addEventListener('click', function(e) {
  var clicked = e.target;
  var selected = Array.prototype.indexOf.call(pageList, clicked);
  pages.selected = selected;

  updateTitle(clicked.label);
});

// Updates the toolbar title
var title = document.getElementById("title");

function updateTitle(txt) {
  title.innerHTML = txt;
}

// Load blogs with ajax call
var blog_ajax = document.querySelector('#blog-ajax');

function loadBlogs() {
  var url = document.URL + "blog/ajax/";

  blog_ajax.handleAs = 'json';
  blog_ajax.method = 'GET';
  blog_ajax.url = url;
  blog_ajax.go();
  console.log(blog_ajax.response);
}
  </script>
</html>
